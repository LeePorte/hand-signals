<template>
  <div id="nodBtn" class="tray-button-outer" tabindex="0" @mouseover="openReactions" @mouseleave="closeReactions" @keyup.enter="openReactions" @keyup.esc="closeReactions">
    <a class="dropdown-trigger-button" tabindex="-1" aria-label="Open Nod extension" role="button">
      <div class="tray-button-bg"></div>
      <img :src="getDropdown" style="height: 42px;" />
      <ReactionsDropdown v-if="this.$store.state.reactions" />
    </a>
  </div>
</template>

<script>
import ReactionsDropdown from "../ReactionsDropdown";

export default {
  components: {
    ReactionsDropdown,
  },
  computed: {
    getDropdown() {
      return `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAACXBIWXMAAC4jAAAuIwF4pT92AAALUGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDIgNzkuMTY0MzUyLCAyMDIwLzAxLzMwLTE1OjUwOjM4ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIwLTA0LTI4VDE5OjUxOjA2KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIwLTA1LTA1VDA4OjA3OjUzKzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMC0wNS0wNVQwODowNzo1MyswMTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzQ1ODI1OTAtYzJkYi0xYjQ0LTk2NWEtMGZiOGJmYWUwNzJkIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6YjgyOGQ5YWItMzc4Yy1hZjRmLTkwOTItZTJlZDczNTc4MjQ1IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NTU2NTQ2NTYtYjhmMi1mMTRiLTllNDQtZDkwN2UxODY3Y2E1IiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHRpZmY6T3JpZW50YXRpb249IjEiIHRpZmY6WFJlc29sdXRpb249IjMwMDAwMDAvMTAwMDAiIHRpZmY6WVJlc29sdXRpb249IjMwMDAwMDAvMTAwMDAiIHRpZmY6UmVzb2x1dGlvblVuaXQ9IjIiIGV4aWY6Q29sb3JTcGFjZT0iMSIgZXhpZjpQaXhlbFhEaW1lbnNpb249IjUyNiIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjUyNiI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTU2NTQ2NTYtYjhmMi1mMTRiLTllNDQtZDkwN2UxODY3Y2E1IiBzdEV2dDp3aGVuPSIyMDIwLTA0LTI4VDE5OjUxOjA2KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmRmNTE3ZmE0LWFjZjctMzU0NC1iYWNmLTZlZWYxNDk4YzkyNiIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0wNVQwODowMCswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNGI4NmNkNi1jZDFhLWQ2NDktODg4ZC01NjMxNWVlMjYxNjgiIHN0RXZ0OndoZW49IjIwMjAtMDUtMDVUMDg6MDYrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMS4xIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZGRiMmQ4NzUtZGQ3OC1mYzQxLWIwZWQtYjNmYmY1MmVkNTc2IiBzdEV2dDp3aGVuPSIyMDIwLTA1LTA1VDA4OjA2KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjEuMSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0NTgyNTkwLWMyZGItMWI0NC05NjVhLTBmYjhiZmFlMDcyZCIgc3RFdnQ6d2hlbj0iMjAyMC0wNS0wNVQwODowNzo1MyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIxLjEgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6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`;
    },
    getUsername() {
      if (this.$store.state.isFullName) {
        return this.$store.getters.getUser("fullName");
      } else {
        return this.$store.getters.getUser("name");
      }
    }
  },
  methods: {
    openReactions: function() {
      this.$store.dispatch("openDropdown", "reactions");
    },
    closeReactions: function() {
      this.$store.dispatch("closeDropdown", "reactions");
    },
  },
};
</script>

<style lang="scss" scoped>
.tray-button-outer {
  &:focus > .tray-button {
    background-color: rgba(2, 191, 165, 0.15);
  }
}
</style>
